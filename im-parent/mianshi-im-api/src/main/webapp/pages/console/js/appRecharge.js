var page=0;var sum=0;layui.use(['form','layer','laydate','table','laytpl'],function(){    var form = layui.form,        layer = parent.layer === undefined ? layui.layer : top.layer,        $ = layui.jquery,        laydate = layui.laydate,        laytpl = layui.laytpl,        table = layui.table;    //非管理员登录屏蔽操作按钮    if(localStorage.getItem("IS_ADMIN")==0){        $(".appRecharge_div").empty();    }    // APP充值列表列表    var tableIns = table.render({        elem: '#appRecharge_table'        ,url:request("/console/systemRecharge")        ,page: {            layout: [ 'prev', 'page', 'next','limit', 'count', 'skip'] //自定义分页布局            ,groups: 3 //只显示 1 个连续页码            ,first: false //不显示首页            ,last: false //不显示尾页        }        ,toolbar: '#toolbar'        ,curr: 0        ,limit:Common.limit        ,limits:Common.limits        ,groups: 7        , totalRow: true        ,cols: [[ //表头            {field: 'id', title: '充值记录Id',width:'10%', totalRowText: '合计'}            ,{field: 'tradeNo', title: '交易单号',width:'10%'}            ,{field: 'userId', title: '用户Id', width:'10%'}            ,{field: 'userName', title: '充值用户昵称', width:'10%',templet : function (d) {                    var userName;                    (d.userName == "" ? userName = "测试用户" : userName = d.userName);                    return userName;                }}            ,{field: 'money', title: '充值金额', width:'10%', totalRow: true}            ,{field: 'desc', title: '备注', width:'10%'}            ,{field: 'payType', title: '支付方式', width:'10%',templet : function (d) {                    var payTypeMsg;                    (d.payType == 1 ? payTypeMsg = "支付宝支付" : (d.payType == 2) ? payTypeMsg = "微信支付" : (d.payType == 3) ? payTypeMsg = "余额支付" : (d.payType == 4) ? payTypeMsg = "系统支付": payTypeMsg = "其他方式支付")                    return payTypeMsg;                }}            ,{field: 'status', title: '交易状态', width:'10%',templet : function (d) {                    var statusMsg;                    (d.status == 0 ? statusMsg = "等待支付" : (d.status == 1) ? statusMsg = "支付完成" : (d.status == 2) ? statusMsg = "交易完成" :(d.status == -1) ? statusMsg = "交易关闭" : statusMsg = "关闭")                    if(d.manualPay_status == 1){                        statusMsg = "审核成功";                    }else if(d.manualPay_status == -1){                        statusMsg = "审核失败"                    }                    return statusMsg;                }}            ,{field: 'type', title: '类型', width:'10%', templet : function (d) {					var statusMsg;            		(d.type == 1 ? statusMsg = "APP充值" : (d.type == 18) ? statusMsg = "扫码手动充值" : statusMsg = "其他方式充值")					return statusMsg;                }}            ,{field: 'time',title:'充值时间',templet: function(d){                    return UI.getLocalTime(d.time);                }}        ]]        ,done:function(res, curr, count){            checkRequst(res);            var last_value =  Common.getValueForElement("#appRecharge_limlt");            //获取当前每页大小            var recodeLimit = tableIns.config.limit;            //设置零时保留的值            $("#appRecharge_limlt").val(recodeLimit);            //判断是否改变了每页大小数            if (last_value != recodeLimit){                // 刷新                table.reload("appRecharge_table",{                    url:request("/console/systemRecharge"),                    page: {                        curr: 1 //重新从第 1 页开始                    }                })            }            //日期范围            layui.laydate.render({                elem: '#appRechargeMsgDate'                ,range: "~"                ,done: function(value, date, endDate){  // choose end                    //console.log("date callBack====>>>"+value); //得到日期生成的值，如：2017-08-18                    var startDate = value.split("~")[0];                    var endDate = value.split("~")[1];                    // Count.loadGroupMsgCount(roomJId,startDate,endDate,timeUnit);                    table.reload("appRecharge_table",{                        page: {                            curr: 1 //重新从第 1 页开始                        },                        where: {                            // userId : data.userId,  //搜索的关键字                            startDate : startDate,                            endDate : endDate                        }                    })                }                ,max: 1            });            if(localStorage.getItem("IS_ADMIN")==0){                $(".btn_addLive").hide();                $(".delete").hide();                $(".chatMsg").hide();                $(".member").hide();            }        }    });    // 列表操作    table.on('tool(redEnvelope_table)', function(obj){        var layEvent = obj.event,            data = obj.data;        if(layEvent === 'delete'){// 红包领取详情        }    });    //首页搜索    $(".search_live").on("click",function(){        // 关闭超出宽度的弹窗        $(".layui-layer-content").remove();        table.reload("appRecharge_table",{            url:request("/console/systemRecharge"),            where: {                userId : Common.getValueForElement("#userId"), //搜索的关键字                type : Common.getValueForElement("#complaint_select"),            },            page: {                curr: 1 //重新从第 1 页开始            }        });    });});var appRecharge={    btn_back:function(){        $("#redEnvelope").show();        $("#receiveWater").hide();    }}$(function () {    //调用父级页面的Js函数    window.parent.getJointVisitPath();})